import{_ as e,o as i,c as a,e as l}from"./app-VZalTjo3.js";const n="/dadagarden.github.io/assets/1-Cbf4bXi6.png",t="/dadagarden.github.io/assets/2-J3LKw7Qv.png",s="/dadagarden.github.io/assets/3-BhSMAF71.png",d="/dadagarden.github.io/assets/4-BbjRfzGm.png",r={},o=l('<div class="hint-container note"><p class="hint-container-title">注</p><p>本篇文章将要介绍Waline评论及其如何部署到vuepress个人博客中。其中使用了LeanCloud作为Waline的后端服务。</p></div><h2 id="前提" tabindex="-1"><a class="header-anchor" href="#前提"><span>前提</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><ul><li>请确保你有使用代理的基本能力（Vercel受DNS污染，创建后的项目会无法访问）</li><li>本篇文章中仅介绍使用Vercel部署Waline</li><li>已经有购买好的国内域名（方便Vercel解析域名，提高国内访问性）。</li></ul></div><h2 id="什么是leancloud" tabindex="-1"><a class="header-anchor" href="#什么是leancloud"><span>什么是LeanCloud？</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>LeanCloud 是一家提供后端云服务的公司，主要面向移动应用开发者和企业。它提供了一系列服务，包括数据存储、用户认证、消息推送、实时通信等。通过使用 LeanCloud 的服务，开发者可以快速构建应用的后端，而无需自己管理服务器和数据库。</p></div><h3 id="主要功能" tabindex="-1"><a class="header-anchor" href="#主要功能"><span>主要功能</span></a></h3><ol><li><strong>数据存储</strong>：提供类似于 NoSQL 数据库的服务，支持灵活的数据模型和实时数据同步。</li><li><strong>用户认证</strong>：提供用户注册、登录、密码找回等功能。</li><li><strong>消息推送</strong>：支持向用户发送通知和消息。</li><li><strong>实时通信</strong>：支持实时聊天、文件传输等功能。</li><li><strong>应用统计</strong>：提供应用使用情况的统计数据。</li><li><strong>云函数</strong>：允许开发者在云端运行代码，处理逻辑和数据。</li></ol><div class="hint-container important"><p class="hint-container-title">重要</p><p>根据LeanCloud的特点，我们可以将Waline的后端服务交给LeanCloud处理。</p></div><h2 id="什么是waline" tabindex="-1"><a class="header-anchor" href="#什么是waline"><span>什么是Waline？</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>Waline 是一个现代的、轻量级的评论系统，它旨在为网站提供快速、简洁的评论功能。Waline 通常以 JavaScript 库的形式存在，可以轻松地集成到任何静态网站或博客中。</p></div><h3 id="特点" tabindex="-1"><a class="header-anchor" href="#特点"><span>特点</span></a></h3><ul><li>轻量化</li><li>易于集成</li><li>无需数据库：可以使用第三方服务存储评论数据，例如LeanCloud</li><li>支持社交账号登录：例如QQ、Github等</li><li>支持Markdown</li><li>实时评论更新</li><li>多语言支持</li><li>高自定义</li><li>提供管理端界面</li><li>具有一定的安全性：防止XSS攻击</li></ul><h2 id="开始部署" tabindex="-1"><a class="header-anchor" href="#开始部署"><span>开始部署</span></a></h2><h3 id="_1-leancloud创建项目" tabindex="-1"><a class="header-anchor" href="#_1-leancloud创建项目"><span>1. LeanCloud创建项目</span></a></h3><ul><li>注册并登录<code>LeanCloud</code>国际版</li><li>进入<code>控制台</code></li><li>点击<code>创建应用</code></li><li>按照下图填写信息：</li></ul><figure><img src="'+n+'" alt="创建LeanCloud应用" tabindex="0" loading="lazy"><figcaption>创建LeanCloud应用</figcaption></figure><ul><li>创建成功后进入应用</li><li>点击<code>设置</code></li><li>选择<code>应用凭证</code></li><li>记住<code>Credentials</code>下的三个字段，分别是<code>AppID</code>、<code>AppKey</code>、<code>MasterKey</code>：</li></ul><figure><img src="'+t+'" alt="获取三个重要字段" tabindex="0" loading="lazy"><figcaption>获取三个重要字段</figcaption></figure><h3 id="_2-vercel中部署waline" tabindex="-1"><a class="header-anchor" href="#_2-vercel中部署waline"><span>2. Vercel中部署Waline</span></a></h3><ul><li>接着<a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample" target="_blank" rel="noopener noreferrer">点击这里</a>进入Vercel配置Waline项目</li><li>选择用户，用于指定克隆Waline到该用户下</li><li>自定义仓库名称，推荐带有Waline字段，方便记忆维护：</li></ul><figure><img src="'+s+'" alt="指定用户，填写仓库信息" tabindex="0" loading="lazy"><figcaption>指定用户，填写仓库信息</figcaption></figure><ul><li>等待其自动部署，成功后如下图所示：</li></ul><figure><img src="'+d+`" alt="成功部署" tabindex="0" loading="lazy"><figcaption>成功部署</figcaption></figure><h3 id="_3-在-vercel-中配置子域名" tabindex="-1"><a class="header-anchor" href="#_3-在-vercel-中配置子域名"><span>3. 在 Vercel 中配置子域名</span></a></h3><div class="hint-container important"><p class="hint-container-title">重要</p><ul><li>在进行这一步之前，请确保你有购买好的国内域名，此处以阿里云购买的域名为例</li><li>在<a href="./Vercel%E9%83%A8%E7%BD%B2">Vercel 部署</a>一篇中已经详细介绍了如何绑定项目至国内域名，<mark>此处将简练描述过程</mark></li></ul></div><ul><li>假设你购买的域名为<code>dadagarden.fun</code></li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p>由于在Vercel部署一篇中我们已经使用了<code>dadagarden.fun</code>并且默认重定向了该地址到<code>www.dadagarden.fun</code>。所以此处我们可以定义一个子域名<code>comments.dadagarden.fun</code></p></div><ul><li>在 Vercel 中进入你的Waline评论项目的控制台</li><li>点击<code>Settings</code></li><li>选择<code>Domains</code></li><li>填入子域名<code>comments.dadagarden.fun</code></li><li>点击<code>Add</code></li><li>第一次解析会失败，记住<code>Value</code>值，这一次的<code>Value</code>值对应的是<code>CNAME</code>类型</li></ul><h3 id="_4-在域名注册商中配置-dns-记录" tabindex="-1"><a class="header-anchor" href="#_4-在域名注册商中配置-dns-记录"><span>4. 在域名注册商中配置 DNS 记录</span></a></h3><ul><li>打开你注册 <code>dadagarden.fun</code> 域名的注册商网站并登录。</li><li>找到与 <code>dadagarden.fun</code> 域名相关的 DNS 管理页面。（阿里云直接搜索<code>域名解析</code>）</li><li>添加一条新的<code>CNAME</code>记录： <ul><li><strong>名称 (Name)</strong>：<code>comments</code>（子域名部分）</li><li><strong>类型 (Type)</strong>：CNAME</li><li><strong>值 (Value)</strong>：你的 Waline 项目在 Vercel 上的 <code>Value</code></li></ul></li><li>填写完毕后<code>确认</code></li><li>DNS 记录的生效时间可能需要几分钟到几小时不等。</li><li>打开浏览器并访问 <code>https://comments.dadagarden.fun</code>，确保它正确指向你的 Waline 项目。</li></ul><h3 id="_5-本地项目配置-waline-评论功能" tabindex="-1"><a class="header-anchor" href="#_5-本地项目配置-waline-评论功能"><span>5. 本地项目配置 Waline 评论功能</span></a></h3><p><strong>更新 Waline 配置</strong>：</p><ul><li>在你的 vuepress-theme-hope 项目中，更新 Waline 的配置文件，确保 Waline 的服务器地址使用新的子域名 <code>comments.dadagarden.fun</code>。</li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p>启用之前请确保安装好 @waline/client</p><div class="language-cmd line-numbers-mode" data-highlighter="shiki" data-ext="cmd" data-title="cmd" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">pnpm </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">add</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">D</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">waline</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">client</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><ul><li>找到<code>theme.ts</code>文件，在<code>serverURL</code>中填入对应的 Waline 地址</li></ul><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> hopeTheme</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">		comment</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">			provider</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Waline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">			serverURL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https://comments.dadagarden.fun&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>最后推送你的项目到 GitHub 仓库中</li><li>就可以在你的网站中看到<code>Waline</code>评论模块了。</li></ul><h3 id="_6-注册管理员" tabindex="-1"><a class="header-anchor" href="#_6-注册管理员"><span>6. 注册管理员</span></a></h3><div class="hint-container important"><p class="hint-container-title">重要</p><p>在<code>https://comments.dadagarden.fun</code>中我们还需要进行管理员注册，第一个注册的用户会成为管理员</p></div><ul><li>进入 <code>评论管理</code> 网页，在你的Waline地址后面添加<code>/ui/register</code>进行注册</li><li>管理员登录后就可以对评论进行审核、删除、置顶等操作了。</li></ul><div class="hint-container note"><p class="hint-container-title">注</p><p>到这里你的评论功能就配置完成了！</p></div>`,41),c=[o];function h(p,g){return i(),a("div",null,c)}const m=e(r,[["render",h],["__file","Waline评论部署.html.vue"]]),k=JSON.parse('{"path":"/about/blog-building/Waline%E8%AF%84%E8%AE%BA%E9%83%A8%E7%BD%B2.html","title":"Waline评论部署","lang":"zh-CN","frontmatter":{"title":"Waline评论部署","icon":"gears","date":"2024-07-22T00:00:00.000Z","category":"博客搭建","tags":["Waline","LeanCloud"],"order":"5","cover":"/assets/images/Waline评论部署.jpg","excerpt":"本篇文章将介绍如何使用LeanCloud作为后端服务，在Vercel上部署Waline评论系统，并将其集成到VuePress个人博客中。","description":"注 本篇文章将要介绍Waline评论及其如何部署到vuepress个人博客中。其中使用了LeanCloud作为Waline的后端服务。 前提 提示 请确保你有使用代理的基本能力（Vercel受DNS污染，创建后的项目会无法访问） 本篇文章中仅介绍使用Vercel部署Waline 已经有购买好的国内域名（方便Vercel解析域名，提高国内访问性）。 什么...","head":[["meta",{"property":"og:url","content":"https://matike16.github.io/dadagarden.github.io/dadagarden.github.io/about/blog-building/Waline%E8%AF%84%E8%AE%BA%E9%83%A8%E7%BD%B2.html"}],["meta",{"property":"og:site_name","content":"哒哒的花园"}],["meta",{"property":"og:title","content":"Waline评论部署"}],["meta",{"property":"og:description","content":"注 本篇文章将要介绍Waline评论及其如何部署到vuepress个人博客中。其中使用了LeanCloud作为Waline的后端服务。 前提 提示 请确保你有使用代理的基本能力（Vercel受DNS污染，创建后的项目会无法访问） 本篇文章中仅介绍使用Vercel部署Waline 已经有购买好的国内域名（方便Vercel解析域名，提高国内访问性）。 什么..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://matike16.github.io/dadagarden.github.io/dadagarden.github.io/assets/images/Waline评论部署.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-28T04:05:15.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://matike16.github.io/dadagarden.github.io/dadagarden.github.io/assets/images/Waline评论部署.jpg"}],["meta",{"name":"twitter:image:alt","content":"Waline评论部署"}],["meta",{"property":"article:author","content":"哒哒溜"}],["meta",{"property":"article:tag","content":"Waline"}],["meta",{"property":"article:tag","content":"LeanCloud"}],["meta",{"property":"article:published_time","content":"2024-07-22T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-28T04:05:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Waline评论部署\\",\\"image\\":[\\"https://matike16.github.io/dadagarden.github.io/dadagarden.github.io/assets/images/Waline评论部署.jpg\\"],\\"datePublished\\":\\"2024-07-22T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-28T04:05:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"哒哒溜\\",\\"url\\":\\"https://github.com/matike16\\"}]}"]]},"headers":[{"level":2,"title":"前提","slug":"前提","link":"#前提","children":[]},{"level":2,"title":"什么是LeanCloud？","slug":"什么是leancloud","link":"#什么是leancloud","children":[{"level":3,"title":"主要功能","slug":"主要功能","link":"#主要功能","children":[]}]},{"level":2,"title":"什么是Waline？","slug":"什么是waline","link":"#什么是waline","children":[{"level":3,"title":"特点","slug":"特点","link":"#特点","children":[]}]},{"level":2,"title":"开始部署","slug":"开始部署","link":"#开始部署","children":[{"level":3,"title":"1. LeanCloud创建项目","slug":"_1-leancloud创建项目","link":"#_1-leancloud创建项目","children":[]},{"level":3,"title":"2. Vercel中部署Waline","slug":"_2-vercel中部署waline","link":"#_2-vercel中部署waline","children":[]},{"level":3,"title":"3. 在 Vercel 中配置子域名","slug":"_3-在-vercel-中配置子域名","link":"#_3-在-vercel-中配置子域名","children":[]},{"level":3,"title":"4. 在域名注册商中配置 DNS 记录","slug":"_4-在域名注册商中配置-dns-记录","link":"#_4-在域名注册商中配置-dns-记录","children":[]},{"level":3,"title":"5. 本地项目配置 Waline 评论功能","slug":"_5-本地项目配置-waline-评论功能","link":"#_5-本地项目配置-waline-评论功能","children":[]},{"level":3,"title":"6. 注册管理员","slug":"_6-注册管理员","link":"#_6-注册管理员","children":[]}]}],"git":{"createdTime":1721652481000,"updatedTime":1722139515000,"contributors":[{"name":"matike16","email":"lda240820@gmail.com","commits":5}]},"readingTime":{"minutes":4.49,"words":1347},"filePathRelative":"about/blog-building/Waline评论部署.md","localizedDate":"2024年7月22日","autoDesc":true}');export{m as comp,k as data};
